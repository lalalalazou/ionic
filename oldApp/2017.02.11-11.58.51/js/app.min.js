var httpPost=function(t){t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8";var e=function(t){var a="",r,l,s,i,o,n,c;for(r in t){l=t[r];if(l instanceof Array){for(c=0;c<l.length;++c){o=l[c];s=r+"["+c+"]";n={};n[s]=o;a+=e(n)+"&"}}else if(l instanceof Object){for(i in l){o=l[i];s=r+"["+i+"]";n={};n[s]=o;a+=e(n)+"&"}}else if(l!==undefined&&l!==null)a+=encodeURIComponent(r)+"="+encodeURIComponent(l)+"&"}return a.length?a.substr(0,a.length-1):a};t.defaults.transformRequest=[function(t){return angular.isObject(t)&&String(t)!=="[object File]"?e(t):t}]};angular.module("starter",["ionic","starter.controllers","starter.services"],httpPost).run(function(t,e,a,r,l,s){t.ready(function(){if(window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard){cordova.plugins.Keyboard.hideKeyboardAccessoryBar(true);cordova.plugins.Keyboard.disableScroll(true)}if(window.StatusBar){StatusBar.styleDefault()}});e.quickLogon=false;e.isNeedSelectSit=false;var i=r.path();i=i.split("/");function o(t,a,r,l){var i=s.fLogin(t,a,r,l);var o=s.zjPost(i,"postlogin.php");o.then(function(a){e.quickLogon=false;if(a.status){if(s.setUsername(a)){console.log("登录成功")}}else{s.fLogOut(r,t)}},function(t){console.log("链接失败")})}if(i[1]=="home"&&i[2]>0){e.quickLogon=true;var n=i[3];var c=i[4];var p=i[2];o(n,c,p,false)}var m=sessionStorage.getItem("islogin")||localStorage.getItem("islogin");var d=localStorage.getItem("userInfo");d=JSON.parse(d);if(m&&d){if(d.status){e.userInfo=d;e.islogin=1;e.$broadcast("islogin",e.islogin);e.$broadcast("userInfo",e.userInfo);var f=sessionStorage.getItem("ss");e.ss=JSON.parse(f);var u=sessionStorage.getItem("xd");e.xd=JSON.parse(u)}}var v=["home","news","newsContent","classfy","productList","pContent","activityIndex","activityIndianalist","activityCharitablelist","activityCharitableContent","charitableUserList","activityIndianaContent","indianaUserList","mycart","addorder","pay","orderlist","orderContent","receivelist","addreceiver","editreceiver","returnGoods","returngoodscontent","couponList","couponCode","getGoods","userIndex"];e.$on("$stateChangeStart",function(t,r,l,s,i,o){var n=r.name;n=n.replace("tab.","");if(e.quickLogon){t.preventDefault()}if(v.indexOf(n)>=0&&!e.islogin){a.go("tab.login");t.preventDefault()}});e.$on("$ionicView.beforeEnter",function(){var t=a.current.name;t=t.replace("tab.","");var e=false;var r=["userIndex","classfy","mycart","activityIndex","home"];if(r.indexOf(t)>=0){if(t!="login"){e=true}}else{}l.showBar(e)})}).config(function(t,e,a){a.platform.ios.tabs.style("standard");a.platform.ios.tabs.position("bottom");a.platform.android.tabs.style("standard");a.platform.android.tabs.position("bottom");a.platform.ios.navBar.alignTitle("center");a.platform.android.navBar.alignTitle("center");t.state("tab",{url:"/tab",abstract:true,templateUrl:"templates/tabs.html"}).state("tab.home",{url:"/home",views:{home:{templateUrl:"templates/home.html",prefetchTemplate:false,controller:"HomeCtrl"}}}).state("tab.login",{url:"/login",views:{home:{templateUrl:"templates/login.html",prefetchTemplate:false,controller:"loginpageMyCtrl"}}}).state("tab.news",{url:"/news",views:{home:{templateUrl:"templates/news.html",prefetchTemplate:false,controller:"newsMyCtrl"}}}).state("tab.newsContent",{url:"/newsContent/:nid",views:{home:{templateUrl:"templates/newsContent.html",prefetchTemplate:false,controller:"newsContentMyCtrl"}}}).state("tab.classfy",{url:"/classfy",cache:true,views:{goods:{templateUrl:"templates/classfy.html",prefetchTemplate:false,controller:"classlistMyCtrl"}}}).state("tab.productList",{url:"/productList/:val/:meth",cache:true,views:{goods:{templateUrl:"templates/productList.html",prefetchTemplate:false,controller:"productlistMyCtrl"}}}).state("tab.pContent",{url:"/pContent/:pid",views:{goods:{templateUrl:"templates/pContent.html",prefetchTemplate:false,controller:"pcontentMyCtrl"}}}).state("tab.activityIndex",{url:"/activityIndex",views:{activity:{templateUrl:"templates/activityIndex.html",prefetchTemplate:false,controller:"activityMyCtrl"}}}).state("tab.activityIndianalist",{url:"/activityIndianalist",views:{activity:{templateUrl:"templates/activityIndianalist.html",prefetchTemplate:false,controller:"activityIndianalistMyCtrl"}}}).state("tab.activityCharitablelist",{url:"/activityCharitablelist",views:{activity:{templateUrl:"templates/activityCharitablelist.html",prefetchTemplate:false,controller:"activityCharitablelistMyCtrl"}}}).state("tab.activityCharitableContent",{url:"/activityCharitableContent/:cid",views:{activity:{templateUrl:"templates/activityCharitableContent.html",prefetchTemplate:false,controller:"activityCharitableContentMyCtrl"}}}).state("tab.charitableUserList",{url:"/charitableUserList",views:{user:{templateUrl:"templates/charitableUserList.html",prefetchTemplate:false,controller:"charitableUserListMyCtrl"}}}).state("tab.activityIndianaContent",{url:"/activityIndianaContent/:cid",views:{activity:{templateUrl:"templates/activityIndianaContent.html",prefetchTemplate:false,controller:"activityIndianaContentMyCtrl"}}}).state("tab.indianaUserList",{url:"/indianaUserList",views:{user:{templateUrl:"templates/indianaUserList.html",prefetchTemplate:false,controller:"indianaUserListMyCtrl"}}}).state("tab.mycart",{url:"/mycart",views:{carts:{templateUrl:"templates/mycart.html",prefetchTemplate:false,controller:"mycartlistMyCtrl"}}}).state("tab.addorder",{url:"/addorder",views:{carts:{templateUrl:"templates/addorder.html",prefetchTemplate:false,controller:"addorderMyCtrl"}}}).state("tab.pay",{url:"/pay/:type/:oid",views:{carts:{templateUrl:"templates/pay.html",prefetchTemplate:false,controller:"payMyCtrl"}}}).state("tab.orderlist",{url:"/orderlist/:sid",views:{user:{templateUrl:"templates/orderlist.html",prefetchTemplate:false,controller:"orderlistMyCtrl"}}}).state("tab.orderContent",{url:"/orderContent/:oid",views:{user:{templateUrl:"templates/orderContent.html",prefetchTemplate:false,controller:"orderContentMyCtrl"}}}).state("tab.receivelist",{url:"/receivelist",views:{user:{templateUrl:"templates/receivelist.html",prefetchTemplate:false,controller:"receivelistMyCtrl"}}}).state("tab.addreceiver",{url:"/addreceiver",views:{user:{templateUrl:"templates/addreceiver.html",prefetchTemplate:false,controller:"addreceivelistMyCtrl"}}}).state("tab.editreceiver",{url:"/editreceiver/:rid",views:{user:{templateUrl:"templates/editreceiver.html",prefetchTemplate:false,controller:"editreceiverMyCtrl"}}}).state("tab.couponList",{url:"/couponList",views:{user:{templateUrl:"templates/couponList.html",prefetchTemplate:false,controller:"couponListMyCtrl"}}}).state("tab.couponCode",{url:"/couponCode/:cid",views:{user:{templateUrl:"templates/couponCode.html",prefetchTemplate:false,controller:"couponCodeMyCtrl"}}}).state("tab.getGoods",{url:"/getGoods/:meth/:cid/:pid",views:{user:{templateUrl:"templates/getGoods.html",prefetchTemplate:false,controller:"getGoodsMyCtrl"}}}).state("tab.userIndex",{url:"/userIndex",views:{user:{templateUrl:"templates/userIndex.html",prefetchTemplate:false,controller:"userindexMyCtrl"}}});e.otherwise("/tab/home")});